@{
    ViewData["Title"] = "Home Page";
}

<!-- Leaflet Map Container -->
<div class="BigContainer">
    <div id="map"></div>
    <></>
    <div id="mapSideBar">
        <nav id="sideBarNav">
            <button onclick="showSideBarSec('TempMarkerForm'); SetActiveButton(this)">Mark it!</button>
            <button onclick="showSideBarSec('SomeOtherForm'); UpdateMyMarkerList(); SetActiveButton(this)">Markers</button>
            <button onclick="showSideBarSec('RegisterObstacleFromDraft'); SetActiveButton(this)">Submitted</button>
        </nav>
        <div class="sideBarContainer">
            <div id="TempMarkerForm">
                <h3>Temporary Marker Form</h3>
                <form id="tempMarkerFormForm">
                    <label for="type">Type</label>
                    <input type="text" id="type" name="type" placeholder="Enter type">

                    <label for="description">Description</label>
                    <input type="text" id="description" name="description" placeholder="Enter description">

                    <label for="lat">Latitude</label>
                    <input type="number" id="lat" name="lat" readonly>

                    <label for="lng">Longitude</label>
                    <input type="number" id="lng" name="lng" readonly>

                    <label for="height">Height (m)</label>
                    <input type="number" id="height" name="height" placeholder="Enter height">

                    <button type="submit">Save Marker</button>
                </form>
                <div id="status"></div>

            </div>
            <div id="SomeOtherForm" hidden>
                <div id="mymrk"></div>
            </div>
            <div id="RegisterObstacleFromDraft" hidden>
                <p>Register drafted obstacle</p>
            </div>
        </div>
        
    </div>
</div>

<link rel="stylesheet" href="~/css/MapPage-TempMarkerForm.css" asp-append-version="true" />
<link rel="stylesheet" href="~/css/MapPage.css" asp-append-version="true" />
<script src="~/js/MapPage.js"></script>
<script src="~/js/icons.js"></script>

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin="" />

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>


<!-- Fullscreen CSS -->
<style>
    
</style>

<script>
    // Initialize the map
    map = L.map('map').setView([51.505, -0.09], 13);

    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Add a marker
    //L.marker([51.505, -0.09]).addTo(map)
    //    .bindPopup('Hello, Leaflet!')
    //    .openPopup();
    fetch("./icon/geticons").then(res => res.json()).then((IconList) => {
        icons = new Icons(IconList);
        mf = new MapFunctions(map, icons);
        mf.Run();
    })
    

    

    const childrenArray = Array.from(document.querySelector('.sideBarContainer').children);
    function showSideBarSec(id) {
        childrenArray.forEach(e => {e.hidden = true});
        document.getElementById(id).hidden = false;
    }
</script>
