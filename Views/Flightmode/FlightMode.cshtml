@{
    ViewData["Title"] = "Flight Mode";
}

<!-- Leaflet Map Container -->
<div class="BigContainer">
    <div class="obstacleContainer">
        <div id="Point" >
        <button onclick="" class="obPoint">Point</button>
        </div>
        <div id="Line">
        <button onclick="" class="obLine">Line</button></div>
    </div>
    <a asp-area="" asp-controller="Home" asp-action="Index" id="exitFlightMode">Exit</a>
    <div id="map"></div>

    <div class="toggleMode">
        <button id="toggleMapMode">Toggle Mode</button>
    </div>
    
</div>

<link rel="stylesheet" href="~/css/MapPage-TempMarkerForm.css" asp-append-version="true" />
<link rel="stylesheet" href="~/css/FlightMode.css" asp-append-version="true" />
<script src="~/js/FlightMode.js"></script>
<script src="~/js/icons.js"></script>

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin="" />

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>


<script>
    // Initialize the map
    map = L.map('map').setView([51.505, -0.09], 13);

    // Add OpenStreetMap tiles
    let tl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Add a marker
    //L.marker([51.505, -0.09]).addTo(map)
    //    .bindPopup('Hello, Leaflet!')
    //    .openPopup();
    map.setView([58.49, 9.75], 17);

    fetch("/icon/geticons").then(res => res.json()).then((IconList) => {
        icons = new Icons(IconList);
        mf = new MapFunctions(map, icons);
        mf.Run();
    })

    window.onresize = function () {
        mf.ResizeMap();
    }
</script>
